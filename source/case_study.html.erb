<%= component "main_header", locals: { theme: 'dark' } %>

<article>
  <!-- Cover image, and title -->
  <header class="padding-x-wide padding-y-xwide border-bottom c-theme-dark">
    <% component 'wrapper', locals: { width: 'wide' } do %>
      <!-- client logo -->
      <h1 class="t-align-center padding-bottom"><%= title %></h1>
      <p class="t-heading t-scale-epsilon t-align-center c-text-secondary">
        <time class="t-weight-bold"><%= date %></time> | <%= type %>
      </p>
    <% end %>
  </header>

  <!-- Main content: sections -->
  <main>
    <% sections = sitemap.resources.select {|r| r.data.project == locals[:slug] || r.data.project == locals[:title] }.sort_by {|r| r.data.weight } %>
    <% sections.each do |section| %>
      <% component 'panel', locals: { slug: false } do %>
        <% component 'wrapper', locals: { width: 'narrow' } do %>
          <h1 class="t-heading t-scale-beta t-align-center padding-bottom-wide"><%= section.data.title %></h1>
          <%= section.render layout: false %>
        <% end %>
      <% end %>
    <% end %>
  </main>
</article>

<!-- Case studies local nav -->
<% if data.case_studies.projects.length > 1 %>
  <% component 'panel', locals: { theme: 'midtone', classes: 'c-well' } do %>
    <% component 'wrapper', locals: { width: 'wide' } do %>
      <h1 class="padding-bottom-wide t-align-center"><%= data.case_studies.headline.nav %></h1>
      <%= component 'case_studies_list', locals: {
        projects: data.case_studies.projects
      } %>
    <% end %>
  <% end %>
<% end %>
