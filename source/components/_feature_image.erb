<%
  # Feature image
	# -> An image occuring within a panel of text

  # Locals:
  # STRING/HASH source: the path or url of the image file
  alt ||= "" # STRING (optional): alt tag
  width ||= 'wide' # STRING (optional): how wide the image should be
  padding ||= { y: 'wide' } # STRING/HASH (optional): padding classes
  borders ||= false # BOOLEAN (optional): add a border to the image
  classes ||= false # STRING (optional): additional utility classes

  # Private:
  fallback_source = source.is_a?(Hash) ? source.values[0] : source

  def source_set(src)
    if src.is_a?(Hash)
      src.collect do |screen, width|
        "#{screen} #{width}w"
      end.join
    end
  end

  props = [
    (width unless width == 'default'),
    'outcrop'
  ]

  utils = [
    padding_classes(padding),
    't-align-center',
    (classes if classes)
  ]
%>

<div data-ui-wrapper<%= props_list(props) %><%= class_list(utils) %>>
  <img class="<%= ('border' if borders) %>" src="<%= asset_url(fallback_source) %>"<%= "srcset='#{source_set(source)}'" if source_set(source) %> alt="<%= alt %>">
</div>
