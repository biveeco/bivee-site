// =============================================================================
// Border utilities
// =============================================================================

// Allow 'important!' here because we want the styles to always apply in small utility classes
// sass-lint:disable no-important

@import '../config/borders';
@import '../config/breakpoints';

// Decorative borders
// -----------------------------------------------------------------------------

.border-markers-corners {
  $slice-width: 20;
  $marker-width: 15px;
  border: border-width('thin') dotted color('border');
  position: relative;

  @supports(border-image: url('/assets/images/borders/border-markers-corners.svg') $slice-width repeat) {
    border: 0;

    // add the border image to a pseudo element so it doesn't mess with the container's padding or bg image
    &::before {
      $offset: -(($marker-width - border-width('thin')) / 2);

      border: #{$slice-width}px dotted color('border');
      border-image: url('/assets/images/borders/border-markers-corners.svg') $slice-width repeat;
      bottom: $offset;
      content: '';
      display: block;
      left: $offset;
      position: absolute;
      right: $offset;
      top: $offset;
      z-index: 3;
    }
  }
}

// base styles for border-markers classes used on panels, etc.
[class*='border-markers'] {
  &:not(.border-markers-corners) {
    position: relative;

    // the vertical 'eyebrow' at top center
    &::after {
      content: '';
      display: block;
      left: 50%;
      position: absolute;
    }

    @supports(border-image: url('/assets/images/borders/border-markers-wide-top.svg') 12 repeat) {
      &::before {
        content: '';
        display: block;
        left: 0;
        position: absolute;
        right: 0;
      }
    }
  }
}

@mixin border-markers(
  $side,
  $image: 'border-markers-wide-top.svg',
  $path: '/assets/images/borders/',
  $color: 'border',
  $slice-width: 53,
  $image-height: 15px,
  $border-height: 1px,
  $eyebrow-height: 40px,
  $eyebrow-width: border-width('thin')
) {
  border-#{$side}: border-width('thin') dotted color('border');

  &::after {
    @include color-background($color);
    #{$side}: -($eyebrow-height / 2);
    height: $eyebrow-height;
    margin-left: -($eyebrow-width / 2);
    width: $eyebrow-width;
  }

  @supports(border-image: url('#{$path}#{$image}') $slice-width repeat) {
    border-#{$side}: 0;

    // add the border image to a pseudo element so it doesn't mess with the container's padding or bg image
    &::before {
      border: #{$slice-width}px dotted color('border');
      border-image: url('#{$path}#{$image}') $slice-width repeat;
      // vertical offset so the border is placed at the edge of the container
      #{$side}: -(($image-height - $border-height) / 2);
    }
  }
}

.border-markers-wide-top {
  @include border-markers('top');
}

.border-markers-wide-bottom {
  @include border-markers('bottom', 'border-markers-wide-bottom.svg');
}

// Basic borders
// -----------------------------------------------------------------------------

// .border, .border@[screen]
@include breakpointify('.border', true) {
  @include border;
}

@each $side in 'top', 'right', 'bottom', 'left' {
  // .border-[side]
  @include breakpointify('.border-#{$side}', true) {
    @include border($side);
  }

  // .no-border-[side]
  @include breakpointify('.no-border-#{$side}', true) {
    border-#{$side}: 0 !important;
  }
}

// .no-border
@include breakpointify('.no-border', true) {
  border: 0 !important;
}

.border-round {
  border-radius: border-radius();
}

.border-round-large {
  border-radius: border-radius('large');
}

// --- Modifiers

// make a border thicker
.border-thick {
  border-width: border-width('thick') !important;
}
